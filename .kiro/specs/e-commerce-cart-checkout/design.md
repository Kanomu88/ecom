# Design Document

## Overview

à¸£à¸°à¸šà¸š E-Commerce Cart & Checkout à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸§à¹‡à¸šà¹„à¸‹à¸•à¹Œ PINKORY à¸ˆà¸°à¹€à¸à¸´à¹ˆà¸¡à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸à¸²à¸£à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¸ªà¸´à¸™à¸„à¹‰à¸²à¹à¸šà¸šà¸„à¸£à¸šà¸§à¸‡à¸ˆà¸£à¹€à¸‚à¹‰à¸²à¸à¸±à¸šà¸£à¸°à¸šà¸šà¸—à¸µà¹ˆà¸¡à¸µà¸­à¸¢à¸¹à¹ˆ à¹‚à¸”à¸¢à¹ƒà¸Šà¹‰à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¹à¸šà¸š Client-Server à¸—à¸µà¹ˆà¹à¸¢à¸à¸ªà¹ˆà¸§à¸™ Frontend (HTML/CSS/JavaScript) à¹à¸¥à¸° Backend (Node.js/Express/MongoDB) à¸­à¸­à¸à¸ˆà¸²à¸à¸à¸±à¸™

à¸£à¸°à¸šà¸šà¸ˆà¸°à¸›à¸£à¸°à¸à¸­à¸šà¸”à¹‰à¸§à¸¢ 3 à¸ªà¹ˆà¸§à¸™à¸«à¸¥à¸±à¸:
1. **Cart System** - à¸ˆà¸±à¸”à¸à¸²à¸£à¸•à¸°à¸à¸£à¹‰à¸²à¸ªà¸´à¸™à¸„à¹‰à¸²à¸à¸±à¹ˆà¸‡ client à¸”à¹‰à¸§à¸¢ localStorage
2. **Order System** - à¸ˆà¸±à¸”à¸à¸²à¸£à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¹à¸¥à¸°à¸ªà¸–à¸²à¸™à¸°à¸•à¹ˆà¸²à¸‡à¹†
3. **Payment System** - à¸ªà¸£à¹‰à¸²à¸‡ QR Code PromptPay à¸ªà¸³à¸«à¸£à¸±à¸šà¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™

## Architecture

### System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend Layer                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Cart    â”‚  â”‚ Checkout â”‚  â”‚  Order   â”‚  â”‚  Admin   â”‚   â”‚
â”‚  â”‚  Page    â”‚  â”‚   Page   â”‚  â”‚  Track   â”‚  â”‚  Orders  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚       â”‚             â”‚              â”‚              â”‚          â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                         â”‚                                     â”‚
â”‚                    localStorage                               â”‚
â”‚                    (Cart Data)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Backend Layer (Express)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Order      â”‚  â”‚   Payment    â”‚  â”‚   Product    â”‚      â”‚
â”‚  â”‚   Routes     â”‚  â”‚   Routes     â”‚  â”‚   Routes     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                 â”‚                  â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Order      â”‚  â”‚   QR Code    â”‚  â”‚   Product    â”‚      â”‚
â”‚  â”‚   Service    â”‚  â”‚   Generator  â”‚  â”‚   Service    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Database Layer (MongoDB)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Orders     â”‚  â”‚   Products   â”‚  â”‚    Admins    â”‚      â”‚
â”‚  â”‚  Collection  â”‚  â”‚  Collection  â”‚  â”‚  Collection  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


### Technology Stack

**Frontend:**
- HTML5, CSS3, Vanilla JavaScript
- localStorage API à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸°à¸à¸£à¹‰à¸²
- Fetch API à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸£à¸µà¸¢à¸ REST API
- QR Code library: `qrcode.js` à¸«à¸£à¸·à¸­ `qrcode-generator`

**Backend:**
- Node.js + Express.js
- MongoDB + Mongoose ODM
- JWT à¸ªà¸³à¸«à¸£à¸±à¸š authentication (à¹ƒà¸Šà¹‰à¸£à¸°à¸šà¸šà¹€à¸”à¸´à¸¡)
- PromptPay QR Code generation library

**External Services:**
- PromptPay QR Code specification (EMVCo)
- Email service (optional - à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¹ˆà¸‡à¸¢à¸·à¸™à¸¢à¸±à¸™à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­)

## Components and Interfaces

### 1. Frontend Components

#### 1.1 Cart Component (cart.html + cart.js)

**Responsibilities:**
- à¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²à¹ƒà¸™à¸•à¸°à¸à¸£à¹‰à¸²
- à¸ˆà¸±à¸”à¸à¸²à¸£à¸à¸²à¸£à¹€à¸à¸´à¹ˆà¸¡/à¸¥à¸š/à¹à¸à¹‰à¹„à¸‚à¸ˆà¸³à¸™à¸§à¸™à¸ªà¸´à¸™à¸„à¹‰à¸²
- à¸„à¸³à¸™à¸§à¸“à¸£à¸²à¸„à¸²à¸£à¸§à¸¡
- à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™ localStorage

**Key Functions:**
```javascript
// Cart Management
addToCart(productId, quantity)
removeFromCart(productId)
updateQuantity(productId, quantity)
getCart()
clearCart()
calculateTotal()

// UI Updates
renderCart()
updateCartBadge()
showAddToCartAnimation()
```

**localStorage Structure:**
```javascript
{
  "cart": [
    {
      "productId": "691e21e4129b8f8e4ce30e0d",
      "name": "Bashful Bunny",
      "price": 1140,
      "quantity": 2,
      "imageUrl": "https://...",
      "brand": "Jellycat"
    }
  ]
}
```

#### 1.2 Checkout Component (checkout.html + checkout.js)

**Responsibilities:**
- à¸£à¸±à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¸ˆà¸±à¸”à¸ªà¹ˆà¸‡à¸ˆà¸²à¸à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰
- à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸„à¸§à¸²à¸¡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
- à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¸œà¹ˆà¸²à¸™ API
- à¹à¸ªà¸”à¸‡ QR Code à¸ªà¸³à¸«à¸£à¸±à¸šà¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™

**Key Functions:**
```javascript
validateShippingInfo()
createOrder()
displayQRCode(qrData)
confirmPayment()
```

**Form Fields:**
- à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥ (required)
- à¸­à¸µà¹€à¸¡à¸¥ (required, email format)
- à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œ (required, 10 digits)
- à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸ˆà¸±à¸”à¸ªà¹ˆà¸‡ (required)
- à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸” (required)
- à¸£à¸«à¸±à¸ªà¹„à¸›à¸£à¸©à¸“à¸µà¸¢à¹Œ (required, 5 digits)
- à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸ (optional)


#### 1.3 Order Tracking Component (order-track.html + order-track.js)

**Responsibilities:**
- à¸„à¹‰à¸™à¸«à¸²à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¸”à¹‰à¸§à¸¢à¸«à¸¡à¸²à¸¢à¹€à¸¥à¸‚à¹à¸¥à¸°à¸­à¸µà¹€à¸¡à¸¥
- à¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹à¸¥à¸°à¸ªà¸–à¸²à¸™à¸°à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
- à¹à¸ªà¸”à¸‡ timeline à¸‚à¸­à¸‡à¸ªà¸–à¸²à¸™à¸°

**Key Functions:**
```javascript
searchOrder(orderNumber, email)
displayOrderDetails(order)
renderOrderTimeline(statusHistory)
```

#### 1.4 Admin Orders Component (admin-orders.html + admin-orders.js)

**Responsibilities:**
- à¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- à¸à¸£à¸­à¸‡à¹à¸¥à¸°à¸„à¹‰à¸™à¸«à¸²à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
- à¸­à¸±à¸à¹€à¸”à¸—à¸ªà¸–à¸²à¸™à¸°à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
- à¹à¸ªà¸”à¸‡à¸ªà¸–à¸´à¸•à¸´

**Key Functions:**
```javascript
loadOrders(filters)
updateOrderStatus(orderId, newStatus, trackingNumber)
filterByStatus(status)
searchOrders(query)
displayStatistics()
```

#### 1.5 Cart Badge Component (à¸—à¸¸à¸à¸«à¸™à¹‰à¸²)

**Responsibilities:**
- à¹à¸ªà¸”à¸‡à¸ˆà¸³à¸™à¸§à¸™à¸ªà¸´à¸™à¸„à¹‰à¸²à¹ƒà¸™à¸•à¸°à¸à¸£à¹‰à¸²à¸—à¸µà¹ˆ header
- à¸­à¸±à¸à¹€à¸”à¸—à¹à¸šà¸š real-time

**Integration:**
- à¹€à¸à¸´à¹ˆà¸¡à¹ƒà¸™ `common.css` à¹à¸¥à¸°à¸—à¸¸à¸à¸«à¸™à¹‰à¸² HTML
- à¹ƒà¸Šà¹‰ `cart-utils.js` à¸—à¸µà¹ˆ share à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸«à¸™à¹‰à¸²

### 2. Backend Components

#### 2.1 Order Model (server/models/Order.js)

**Schema:**
```javascript
{
  orderNumber: String (unique, auto-generated),
  customer: {
    firstName: String,
    lastName: String,
    email: String,
    phone: String
  },
  shippingAddress: {
    address: String,
    province: String,
    postalCode: String,
    note: String
  },
  items: [{
    productId: ObjectId (ref: Product),
    name: String,
    price: Number,
    quantity: Number,
    imageUrl: String
  }],
  totalAmount: Number,
  status: String (enum: pending, paid, confirmed, shipped, delivered, cancelled),
  paymentInfo: {
    method: String (default: 'promptpay'),
    qrCode: String,
    paidAt: Date
  },
  trackingNumber: String,
  statusHistory: [{
    status: String,
    timestamp: Date,
    note: String
  }],
  createdAt: Date,
  updatedAt: Date
}
```

**Methods:**
```javascript
generateOrderNumber()
addStatusHistory(status, note)
calculateTotal()
```


#### 2.2 Order Routes (server/routes/orders.js à¸«à¸£à¸·à¸­à¹€à¸à¸´à¹ˆà¸¡à¹ƒà¸™ back.js)

**Public Endpoints:**
```
POST   /api/orders                    - à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¹ƒà¸«à¸¡à¹ˆ
GET    /api/orders/track              - à¸„à¹‰à¸™à¸«à¸²à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­ (query: orderNumber, email)
GET    /api/orders/:id                - à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
```

**Admin Endpoints (à¸•à¹‰à¸­à¸‡ JWT):**
```
GET    /api/admin/orders              - à¸”à¸¹à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (with filters)
GET    /api/admin/orders/stats        - à¸”à¸¹à¸ªà¸–à¸´à¸•à¸´
PUT    /api/admin/orders/:id/status   - à¸­à¸±à¸à¹€à¸”à¸—à¸ªà¸–à¸²à¸™à¸°
GET    /api/admin/orders/:id          - à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹à¸šà¸š admin
```

**Request/Response Examples:**

**POST /api/orders**
```javascript
// Request
{
  "customer": {
    "firstName": "à¸ªà¸¡à¸Šà¸²à¸¢",
    "lastName": "à¹ƒà¸ˆà¸”à¸µ",
    "email": "somchai@example.com",
    "phone": "0812345678"
  },
  "shippingAddress": {
    "address": "123 à¸–à¸™à¸™à¸ªà¸¸à¸‚à¸¸à¸¡à¸§à¸´à¸—",
    "province": "à¸à¸£à¸¸à¸‡à¹€à¸—à¸à¸¡à¸«à¸²à¸™à¸„à¸£",
    "postalCode": "10110",
    "note": "à¹‚à¸—à¸£à¸à¹ˆà¸­à¸™à¸ªà¹ˆà¸‡"
  },
  "items": [
    {
      "productId": "691e21e4129b8f8e4ce30e0d",
      "name": "Bashful Bunny",
      "price": 1140,
      "quantity": 2,
      "imageUrl": "https://..."
    }
  ]
}

// Response
{
  "success": true,
  "data": {
    "orderId": "692002b138810c26bcf1f611",
    "orderNumber": "ORD-20251127-001",
    "totalAmount": 2280,
    "qrCode": "data:image/png;base64,...",
    "status": "pending"
  }
}
```

#### 2.3 Payment Service (server/services/payment.js)

**Responsibilities:**
- à¸ªà¸£à¹‰à¸²à¸‡ PromptPay QR Code
- à¸„à¸³à¸™à¸§à¸“ CRC checksum
- à¸ªà¸£à¹‰à¸²à¸‡ EMVCo format

**Key Functions:**
```javascript
generatePromptPayQR(phoneNumber, amount, orderNumber)
calculateCRC(data)
formatEMVCo(payload)
```

**PromptPay QR Format:**
```
- Payload Format Indicator: "01"
- Point of Initiation: "11" (static) or "12" (dynamic)
- Merchant Account: PromptPay ID (phone/tax ID)
- Transaction Amount: à¸ˆà¸³à¸™à¸§à¸™à¹€à¸‡à¸´à¸™
- Country Code: "TH"
- Additional Data: Order Number
- CRC: Checksum
```


## Data Models

### Order Collection

```javascript
{
  "_id": ObjectId("692002b138810c26bcf1f611"),
  "orderNumber": "ORD-20251127-001",
  "customer": {
    "firstName": "à¸ªà¸¡à¸Šà¸²à¸¢",
    "lastName": "à¹ƒà¸ˆà¸”à¸µ",
    "email": "somchai@example.com",
    "phone": "0812345678"
  },
  "shippingAddress": {
    "address": "123 à¸–à¸™à¸™à¸ªà¸¸à¸‚à¸¸à¸¡à¸§à¸´à¸—",
    "province": "à¸à¸£à¸¸à¸‡à¹€à¸—à¸à¸¡à¸«à¸²à¸™à¸„à¸£",
    "postalCode": "10110",
    "note": "à¹‚à¸—à¸£à¸à¹ˆà¸­à¸™à¸ªà¹ˆà¸‡"
  },
  "items": [
    {
      "productId": ObjectId("691e21e4129b8f8e4ce30e0d"),
      "name": "Bashful Bunny",
      "price": 1140,
      "quantity": 2,
      "imageUrl": "https://..."
    }
  ],
  "totalAmount": 2280,
  "status": "pending",
  "paymentInfo": {
    "method": "promptpay",
    "qrCode": "data:image/png;base64,...",
    "paidAt": null
  },
  "trackingNumber": null,
  "statusHistory": [
    {
      "status": "pending",
      "timestamp": ISODate("2025-11-27T10:00:00Z"),
      "note": "à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¸–à¸¹à¸à¸ªà¸£à¹‰à¸²à¸‡"
    }
  ],
  "createdAt": ISODate("2025-11-27T10:00:00Z"),
  "updatedAt": ISODate("2025-11-27T10:00:00Z")
}
```

### Status Flow

```
pending â†’ paid â†’ confirmed â†’ shipped â†’ delivered
   â†“
cancelled (à¸ªà¸²à¸¡à¸²à¸£à¸–à¸¢à¸à¹€à¸¥à¸´à¸à¹„à¸”à¹‰à¹€à¸‰à¸à¸²à¸° pending à¹à¸¥à¸° paid)
```

**Status Descriptions:**
- `pending`: à¸£à¸­à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™
- `paid`: à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™à¹à¸¥à¹‰à¸§ (à¸£à¸­ admin à¸¢à¸·à¸™à¸¢à¸±à¸™)
- `confirmed`: à¸¢à¸·à¸™à¸¢à¸±à¸™à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¹à¸¥à¹‰à¸§ (à¸à¸³à¸¥à¸±à¸‡à¹€à¸•à¸£à¸µà¸¢à¸¡à¸ªà¸´à¸™à¸„à¹‰à¸²)
- `shipped`: à¸ˆà¸±à¸”à¸ªà¹ˆà¸‡à¹à¸¥à¹‰à¸§ (à¸¡à¸µà¸«à¸¡à¸²à¸¢à¹€à¸¥à¸‚à¸à¸±à¸ªà¸”à¸¸)
- `delivered`: à¹„à¸”à¹‰à¸£à¸±à¸šà¸ªà¸´à¸™à¸„à¹‰à¸²à¹à¸¥à¹‰à¸§
- `cancelled`: à¸¢à¸à¹€à¸¥à¸´à¸à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­

## Error Handling

### Frontend Error Handling

**Cart Errors:**
- à¸ªà¸´à¸™à¸„à¹‰à¸²à¸«à¸¡à¸”à¸ªà¸•à¹‡à¸­à¸ â†’ à¹à¸ªà¸”à¸‡ alert à¹à¸¥à¸°à¹„à¸¡à¹ˆà¸­à¸™à¸¸à¸à¸²à¸•à¹ƒà¸«à¹‰à¹€à¸à¸´à¹ˆà¸¡à¸¥à¸‡à¸•à¸°à¸à¸£à¹‰à¸²
- à¸•à¸°à¸à¸£à¹‰à¸²à¸§à¹ˆà¸²à¸‡ â†’ à¹à¸ªà¸”à¸‡à¸«à¸™à¹‰à¸²à¸•à¸°à¸à¸£à¹‰à¸²à¸§à¹ˆà¸²à¸‡à¸à¸£à¹‰à¸­à¸¡à¸›à¸¸à¹ˆà¸¡à¸à¸¥à¸±à¸šà¹„à¸›à¸Šà¹‰à¸­à¸›à¸›à¸´à¹‰à¸‡
- localStorage à¹€à¸•à¹‡à¸¡ â†’ à¹à¸ªà¸”à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹à¸¥à¸°à¹à¸™à¸°à¸™à¸³à¹ƒà¸«à¹‰à¸¥à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥

**Checkout Errors:**
- à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸„à¸£à¸š â†’ à¹à¸ªà¸”à¸‡ validation message à¹ƒà¸•à¹‰ field
- API error â†’ à¹à¸ªà¸”à¸‡ error modal à¸à¸£à¹‰à¸­à¸¡à¸›à¸¸à¹ˆà¸¡à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ
- Network error â†’ à¹à¸ªà¸”à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹à¸¥à¸°à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸§à¹‰à¹ƒà¸™ localStorage

**Order Tracking Errors:**
- à¹„à¸¡à¹ˆà¸à¸šà¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­ â†’ à¹à¸ªà¸”à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ "à¹„à¸¡à¹ˆà¸à¸šà¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­ à¸à¸£à¸¸à¸“à¸²à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥"
- à¸­à¸µà¹€à¸¡à¸¥à¹„à¸¡à¹ˆà¸•à¸£à¸‡à¸à¸±à¸™ â†’ à¹à¸ªà¸”à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ "à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡"


### Backend Error Handling

**Validation Errors (400):**
```javascript
{
  "success": false,
  "message": "à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸„à¸£à¸šà¸–à¹‰à¸§à¸™",
  "errors": {
    "email": "à¸£à¸¹à¸›à¹à¸šà¸šà¸­à¸µà¹€à¸¡à¸¥à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡",
    "phone": "à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸•à¹‰à¸­à¸‡à¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¹€à¸¥à¸‚ 10 à¸«à¸¥à¸±à¸"
  }
}
```

**Not Found Errors (404):**
```javascript
{
  "success": false,
  "message": "à¹„à¸¡à¹ˆà¸à¸šà¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­"
}
```

**Server Errors (500):**
```javascript
{
  "success": false,
  "message": "à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥ à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡"
}
```

**Stock Validation:**
- à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š `inStock` à¸‚à¸­à¸‡à¸—à¸¸à¸à¸ªà¸´à¸™à¸„à¹‰à¸²à¸à¹ˆà¸­à¸™à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
- à¸–à¹‰à¸²à¸¡à¸µà¸ªà¸´à¸™à¸„à¹‰à¸²à¸«à¸¡à¸” â†’ return 400 à¸à¸£à¹‰à¸­à¸¡à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸µà¹ˆà¸«à¸¡à¸”

## Testing Strategy

### Unit Tests

**Frontend:**
- Cart functions (add, remove, update, calculate)
- Form validation functions
- localStorage operations

**Backend:**
- Order model methods (generateOrderNumber, calculateTotal)
- Payment service (QR generation)
- Validation middleware

### Integration Tests

**API Endpoints:**
- POST /api/orders - à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¸ªà¸³à¹€à¸£à¹‡à¸ˆ
- POST /api/orders - à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸„à¸£à¸š (400)
- POST /api/orders - à¸ªà¸´à¸™à¸„à¹‰à¸²à¸«à¸¡à¸” (400)
- GET /api/orders/track - à¸„à¹‰à¸™à¸«à¸²à¸ªà¸³à¹€à¸£à¹‡à¸ˆ
- GET /api/orders/track - à¹„à¸¡à¹ˆà¸à¸š (404)
- PUT /api/admin/orders/:id/status - à¸­à¸±à¸à¹€à¸”à¸—à¸ªà¸³à¹€à¸£à¹‡à¸ˆ (with JWT)
- PUT /api/admin/orders/:id/status - à¹„à¸¡à¹ˆà¸¡à¸µ token (401)

### Manual Testing Scenarios

**User Flow:**
1. à¹€à¸¥à¸·à¸­à¸à¸ªà¸´à¸™à¸„à¹‰à¸² â†’ à¹€à¸à¸´à¹ˆà¸¡à¸¥à¸‡à¸•à¸°à¸à¸£à¹‰à¸² â†’ à¸”à¸¹à¸•à¸°à¸à¸£à¹‰à¸² â†’ à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ â†’ à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™ â†’ à¸•à¸´à¸”à¸•à¸²à¸¡à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
2. à¹€à¸à¸´à¹ˆà¸¡à¸ªà¸´à¸™à¸„à¹‰à¸²à¸«à¸¥à¸²à¸¢à¸£à¸²à¸¢à¸à¸²à¸£ â†’ à¹à¸à¹‰à¹„à¸‚à¸ˆà¸³à¸™à¸§à¸™ â†’ à¸¥à¸šà¸šà¸²à¸‡à¸£à¸²à¸¢à¸à¸²à¸£ â†’ à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™
3. à¸›à¸´à¸”à¸«à¸™à¹‰à¸²à¸•à¹ˆà¸²à¸‡ â†’ à¹€à¸›à¸´à¸”à¹ƒà¸«à¸¡à¹ˆ â†’ à¸•à¸°à¸à¸£à¹‰à¸²à¸¢à¸±à¸‡à¸„à¸‡à¸­à¸¢à¸¹à¹ˆ

**Admin Flow:**
1. Login â†’ à¸”à¸¹à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” â†’ à¸à¸£à¸­à¸‡à¸•à¸²à¸¡à¸ªà¸–à¸²à¸™à¸° â†’ à¸­à¸±à¸à¹€à¸”à¸—à¸ªà¸–à¸²à¸™à¸°
2. à¸„à¹‰à¸™à¸«à¸²à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­ â†’ à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” â†’ à¹€à¸à¸´à¹ˆà¸¡à¸«à¸¡à¸²à¸¢à¹€à¸¥à¸‚à¸à¸±à¸ªà¸”à¸¸ â†’ à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹€à¸›à¹‡à¸™ shipped

**Edge Cases:**
- à¸•à¸°à¸à¸£à¹‰à¸²à¸§à¹ˆà¸²à¸‡ â†’ à¸à¸¢à¸²à¸¢à¸²à¸¡à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™
- à¸ªà¸´à¸™à¸„à¹‰à¸²à¸«à¸¡à¸”à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸•à¸°à¸à¸£à¹‰à¸² â†’ à¸à¸¢à¸²à¸¢à¸²à¸¡à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™
- Network à¸‚à¸²à¸”à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
- QR Code à¹„à¸¡à¹ˆà¹‚à¸«à¸¥à¸”


## UI/UX Design

### Design Principles

1. **Consistency** - à¹ƒà¸Šà¹‰à¸ªà¸µ typography à¹à¸¥à¸° layout à¸—à¸µà¹ˆà¸ªà¸­à¸”à¸„à¸¥à¹‰à¸­à¸‡à¸à¸±à¸šà¸«à¸™à¹‰à¸²à¸­à¸·à¹ˆà¸™à¹†
2. **Simplicity** - à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸à¸²à¸£à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¸—à¸µà¹ˆà¸Šà¸±à¸”à¹€à¸ˆà¸™à¹à¸¥à¸°à¹„à¸¡à¹ˆà¸‹à¸±à¸šà¸‹à¹‰à¸­à¸™
3. **Feedback** - à¹à¸ªà¸”à¸‡ loading, success, error states à¸—à¸µà¹ˆà¸Šà¸±à¸”à¹€à¸ˆà¸™
4. **Mobile-First** - responsive design à¸ªà¸³à¸«à¸£à¸±à¸šà¸—à¸¸à¸à¸­à¸¸à¸›à¸à¸£à¸“à¹Œ

### Color Scheme (à¹ƒà¸Šà¹‰à¸ˆà¸²à¸ common.css)

```css
--primary-pink: #FFE5EC
--secondary-pink: #FFC2D4
--accent-pink: #FF85A2
--text-color: #8B6B7B
--border-color: #E5D4D9
--success-green: #4CAF50
--error-red: #F44336
--warning-orange: #FF9800
```

### Cart Page Design

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Header (with cart badge)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  à¸•à¸°à¸à¸£à¹‰à¸²à¸ªà¸´à¸™à¸„à¹‰à¸² (2 à¸£à¸²à¸¢à¸à¸²à¸£)                    â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [à¸£à¸¹à¸›] Bashful Bunny                    â”‚ â”‚
â”‚  â”‚       à¸¿1,140 x 2 = à¸¿2,280              â”‚ â”‚
â”‚  â”‚       [- 2 +] [à¸¥à¸š]                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [à¸£à¸¹à¸›] Care Bear                        â”‚ â”‚
â”‚  â”‚       à¸¿890 x 1 = à¸¿890                  â”‚ â”‚
â”‚  â”‚       [- 1 +] [à¸¥à¸š]                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ à¸¢à¸­à¸”à¸£à¸§à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”:        à¸¿3,170          â”‚ â”‚
â”‚  â”‚ [à¸Šà¹‰à¸­à¸›à¸›à¸´à¹‰à¸‡à¸•à¹ˆà¸­]  [à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™]             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Empty Cart:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ›’                                          â”‚
â”‚  à¸•à¸°à¸à¸£à¹‰à¸²à¸ªà¸´à¸™à¸„à¹‰à¸²à¸§à¹ˆà¸²à¸‡à¹€à¸›à¸¥à¹ˆà¸²                      â”‚
â”‚  à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸ªà¸´à¸™à¸„à¹‰à¸²à¹ƒà¸™à¸•à¸°à¸à¸£à¹‰à¸²                     â”‚
â”‚  [à¹€à¸¥à¸·à¸­à¸à¸‹à¸·à¹‰à¸­à¸ªà¸´à¸™à¸„à¹‰à¸²]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Checkout Page Design

**Step Indicator:**
```
1. à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¸ˆà¸±à¸”à¸ªà¹ˆà¸‡ â†’ 2. à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™ â†’ 3. à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸´à¹‰à¸™
   (active)           (inactive)     (inactive)
```

**Form Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¸ˆà¸±à¸”à¸ªà¹ˆà¸‡                            â”‚
â”‚                                              â”‚
â”‚  à¸Šà¸·à¹ˆà¸­: [_____________]  à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥: [________] â”‚
â”‚  à¸­à¸µà¹€à¸¡à¸¥: [____________________________]      â”‚
â”‚  à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£: [____________________________]   â”‚
â”‚  à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆ: [____________________________]    â”‚
â”‚          [____________________________]    â”‚
â”‚  à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”: [__________] à¸£à¸«à¸±à¸ªà¹„à¸›à¸£à¸©à¸“à¸µà¸¢à¹Œ: [___] â”‚
â”‚  à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸: [____________________________]   â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ à¸ªà¸£à¸¸à¸›à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­                         â”‚ â”‚
â”‚  â”‚ à¸ªà¸´à¸™à¸„à¹‰à¸² 2 à¸£à¸²à¸¢à¸à¸²à¸£                        â”‚ â”‚
â”‚  â”‚ à¸¢à¸­à¸”à¸£à¸§à¸¡: à¸¿3,170                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                              â”‚
â”‚  [à¸à¸¥à¸±à¸š]  [à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Payment Page Design

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™à¸œà¹ˆà¸²à¸™ PromptPay                     â”‚
â”‚                                              â”‚
â”‚  à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­: ORD-20251127-001               â”‚
â”‚  à¸¢à¸­à¸”à¸Šà¸³à¸£à¸°: à¸¿3,170                            â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                         â”‚ â”‚
â”‚  â”‚         [QR CODE IMAGE]                 â”‚ â”‚
â”‚  â”‚                                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                              â”‚
â”‚  ğŸ“± à¸ªà¹à¸à¸™ QR Code à¸”à¹‰à¸§à¸¢à¹à¸­à¸›à¸˜à¸™à¸²à¸„à¸²à¸£             â”‚
â”‚  â±ï¸ à¸à¸£à¸¸à¸“à¸²à¸Šà¸³à¸£à¸°à¸ à¸²à¸¢à¹ƒà¸™ 15 à¸™à¸²à¸—à¸µ                â”‚
â”‚                                              â”‚
â”‚  [à¸‰à¸±à¸™à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™à¹à¸¥à¹‰à¸§]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Order Tracking Page Design

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  à¸•à¸´à¸”à¸•à¸²à¸¡à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­                           â”‚
â”‚                                              â”‚
â”‚  à¸«à¸¡à¸²à¸¢à¹€à¸¥à¸‚à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­: [__________________]   â”‚
â”‚  à¸­à¸µà¹€à¸¡à¸¥: [__________________]                â”‚
â”‚  [à¸„à¹‰à¸™à¸«à¸²]                                     â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­: ORD-20251127-001          â”‚ â”‚
â”‚  â”‚ à¸§à¸±à¸™à¸—à¸µà¹ˆà¸ªà¸±à¹ˆà¸‡: 27 à¸.à¸¢. 2567              â”‚ â”‚
â”‚  â”‚                                         â”‚ â”‚
â”‚  â”‚ â— à¸£à¸­à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™ (27 à¸.à¸¢. 10:00)          â”‚ â”‚
â”‚  â”‚ â— à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™à¹à¸¥à¹‰à¸§ (27 à¸.à¸¢. 10:15)        â”‚ â”‚
â”‚  â”‚ â— à¸¢à¸·à¸™à¸¢à¸±à¸™à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­ (27 à¸.à¸¢. 11:00)    â”‚ â”‚
â”‚  â”‚ â—‹ à¸ˆà¸±à¸”à¸ªà¹ˆà¸‡à¹à¸¥à¹‰à¸§                           â”‚ â”‚
â”‚  â”‚ â—‹ à¹„à¸”à¹‰à¸£à¸±à¸šà¸ªà¸´à¸™à¸„à¹‰à¸²                         â”‚ â”‚
â”‚  â”‚                                         â”‚ â”‚
â”‚  â”‚ à¸£à¸²à¸¢à¸à¸²à¸£à¸ªà¸´à¸™à¸„à¹‰à¸²:                          â”‚ â”‚
â”‚  â”‚ - Bashful Bunny x2                     â”‚ â”‚
â”‚  â”‚ - Care Bear x1                         â”‚ â”‚
â”‚  â”‚                                         â”‚ â”‚
â”‚  â”‚ à¸¢à¸­à¸”à¸£à¸§à¸¡: à¸¿3,170                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Admin Orders Page Design

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  à¸ˆà¸±à¸”à¸à¸²à¸£à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­                           â”‚
â”‚                                              â”‚
â”‚  ğŸ“Š à¸ªà¸–à¸´à¸•à¸´à¸§à¸±à¸™à¸™à¸µà¹‰                              â”‚
â”‚  à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­: 15 | à¸¢à¸­à¸”à¸‚à¸²à¸¢: à¸¿45,600          â”‚
â”‚  à¸£à¸­à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£: 3                             â”‚
â”‚                                              â”‚
â”‚  à¸„à¹‰à¸™à¸«à¸²: [__________] à¸ªà¸–à¸²à¸™à¸°: [à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” â–¼]   â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ORD-001 | à¸ªà¸¡à¸Šà¸²à¸¢ à¹ƒà¸ˆà¸”à¸µ | à¸¿3,170         â”‚ â”‚
â”‚  â”‚ 27 à¸.à¸¢. 10:15 | [à¸Šà¸³à¸£à¸°à¹à¸¥à¹‰à¸§]            â”‚ â”‚
â”‚  â”‚ [à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”] [à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ªà¸–à¸²à¸™à¸°]         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ORD-002 | à¸ªà¸¡à¸«à¸à¸´à¸‡ à¸£à¸±à¸à¸”à¸µ | à¸¿2,280        â”‚ â”‚
â”‚  â”‚ 27 à¸.à¸¢. 09:30 | [à¸£à¸­à¸Šà¸³à¸£à¸°]              â”‚ â”‚
â”‚  â”‚ [à¸”à¸¹à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”] [à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ªà¸–à¸²à¸™à¸°]         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Security Considerations

1. **Input Validation** - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸±à¹‰à¸‡ frontend à¹à¸¥à¸° backend
2. **XSS Prevention** - escape HTML à¹ƒà¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¹à¸ªà¸”à¸‡
3. **CSRF Protection** - à¹ƒà¸Šà¹‰ JWT token à¸ªà¸³à¸«à¸£à¸±à¸š admin endpoints
4. **Rate Limiting** - à¸ˆà¸³à¸à¸±à¸”à¸ˆà¸³à¸™à¸§à¸™ request à¸•à¹ˆà¸­ IP (optional)
5. **Data Sanitization** - à¸—à¸³à¸„à¸§à¸²à¸¡à¸ªà¸°à¸­à¸²à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¹ˆà¸­à¸™à¸šà¸±à¸™à¸—à¸¶à¸ database
6. **HTTPS** - à¹ƒà¸Šà¹‰ HTTPS à¹ƒà¸™ production (à¹à¸™à¸°à¸™à¸³)

## Performance Optimization

1. **Lazy Loading** - à¹‚à¸«à¸¥à¸”à¸£à¸¹à¸›à¸ à¸²à¸à¹à¸šà¸š lazy
2. **Caching** - cache product data à¹ƒà¸™ localStorage (short TTL)
3. **Debouncing** - debounce search à¹à¸¥à¸° quantity update
4. **Pagination** - à¹à¸šà¹ˆà¸‡à¸«à¸™à¹‰à¸²à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¹ƒà¸™ admin (10-20 à¸£à¸²à¸¢à¸à¸²à¸£à¸•à¹ˆà¸­à¸«à¸™à¹‰à¸²)
5. **Indexing** - à¸ªà¸£à¹‰à¸²à¸‡ index à¸ªà¸³à¸«à¸£à¸±à¸š orderNumber, email, status à¹ƒà¸™ MongoDB

## Deployment Considerations

1. **Environment Variables:**
   - `PROMPTPAY_ID` - à¸«à¸¡à¸²à¸¢à¹€à¸¥à¸‚à¸à¸£à¹‰à¸­à¸¡à¹€à¸à¸¢à¹Œà¸‚à¸­à¸‡à¸£à¹‰à¸²à¸™
   - `MONGODB_URI` - connection string
   - `JWT_SECRET` - secret key
   - `PORT` - port number

2. **Database Migration:**
   - à¸ªà¸£à¹‰à¸²à¸‡ Order collection
   - à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¹à¸à¹‰à¹„à¸‚ Product à¹à¸¥à¸° Admin collections

3. **Backward Compatibility:**
   - à¸£à¸°à¸šà¸šà¹€à¸”à¸´à¸¡à¸¢à¸±à¸‡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹„à¸”à¹‰à¸›à¸à¸•à¸´
   - à¹€à¸à¸´à¹ˆà¸¡à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¹ƒà¸«à¸¡à¹ˆà¹‚à¸”à¸¢à¹„à¸¡à¹ˆà¸à¸£à¸°à¸—à¸šà¸£à¸°à¸šà¸šà¹€à¸”à¸´à¸¡
