# Requirements Document

## Introduction

ระบบสั่งซื้อสินค้าแบบครบวงจรสำหรับเว็บไซต์ PINKORY ที่ให้ผู้ใช้สามารถเพิ่มสินค้าลงตะกร้า จัดการตะกร้าสินค้า และชำระเงินผ่าน QR Code ได้อย่างสะดวกและปลอดภัย ระบบนี้จะเชื่อมต่อกับระบบจัดการสินค้าที่มีอยู่แล้ว และเพิ่มฟังก์ชันการสั่งซื้อที่สมบูรณ์

## Glossary

- **Cart System**: ระบบตะกร้าสินค้าที่เก็บรายการสินค้าที่ผู้ใช้เลือกไว้ชั่วคราว
- **Order System**: ระบบจัดการคำสั่งซื้อที่บันทึกข้อมูลการสั่งซื้อที่สมบูรณ์
- **Payment Gateway**: ระบบชำระเงินที่สร้าง QR Code สำหรับการชำระเงิน
- **User**: ผู้ใช้ทั่วไปที่เข้ามาซื้อสินค้า (ไม่ใช่ Admin)
- **Guest Checkout**: การสั่งซื้อโดยไม่ต้องสร้างบัญชีผู้ใช้
- **Order Status**: สถานะของคำสั่งซื้อ (pending, paid, confirmed, shipped, delivered, cancelled)
- **PromptPay QR**: QR Code สำหรับชำระเงินผ่านระบบพร้อมเพย์

## Requirements

### Requirement 1: ระบบตะกร้าสินค้า

**User Story:** ในฐานะผู้ใช้ ฉันต้องการเพิ่มสินค้าลงตะกร้าและจัดการรายการสินค้าในตะกร้า เพื่อที่ฉันจะได้เลือกซื้อสินค้าหลายรายการพร้อมกัน

#### Acceptance Criteria

1. WHEN ผู้ใช้คลิกปุ่ม "เพิ่มลงตะกร้า" บนหน้ารายละเอียดสินค้า, THE Cart System SHALL เพิ่มสินค้านั้นลงในตะกร้าพร้อมจำนวน 1 ชิ้น
2. WHEN ผู้ใช้เพิ่มสินค้าที่มีอยู่ในตะกร้าแล้ว, THE Cart System SHALL เพิ่มจำนวนสินค้านั้นแทนการสร้างรายการใหม่
3. THE Cart System SHALL แสดงจำนวนสินค้าทั้งหมดในตะกร้าที่ไอคอนตะกร้าในทุกหน้า
4. WHEN ผู้ใช้เปิดหน้าตะกร้าสินค้า, THE Cart System SHALL แสดงรายการสินค้าทั้งหมดพร้อมรูปภาพ ชื่อ ราคา และจำนวน
5. WHEN ผู้ใช้เปลี่ยนจำนวนสินค้าในตะกร้า, THE Cart System SHALL อัพเดทราคารวมทันที
6. WHEN ผู้ใช้คลิกปุ่มลบสินค้า, THE Cart System SHALL ลบสินค้านั้นออกจากตะกร้า
7. THE Cart System SHALL คำนวณและแสดงราคารวมของสินค้าทั้งหมดในตะกร้า
8. THE Cart System SHALL เก็บข้อมูลตะกร้าใน localStorage เพื่อให้ข้อมูลคงอยู่เมื่อรีเฟรชหน้า

### Requirement 2: ระบบชำระเงินด้วย QR Code

**User Story:** ในฐานะผู้ใช้ ฉันต้องการชำระเงินผ่าน QR Code PromptPay เพื่อความสะดวกและรวดเร็วในการชำระเงิน

#### Acceptance Criteria

1. WHEN ผู้ใช้คลิกปุ่ม "ชำระเงิน" ในหน้าตะกร้า, THE Cart System SHALL นำผู้ใช้ไปยังหน้ากรอกข้อมูลการจัดส่ง
2. THE Order System SHALL ตรวจสอบว่าข้อมูลการจัดส่งครบถ้วน (ชื่อ ที่อยู่ เบอร์โทร อีเมล)
3. WHEN ผู้ใช้กรอกข้อมูลครบและคลิก "ดำเนินการชำระเงิน", THE Payment Gateway SHALL สร้าง QR Code PromptPay พร้อมยอดเงินที่ต้องชำระ
4. THE Payment Gateway SHALL แสดง QR Code พร้อมรายละเอียดการชำระเงิน (ยอดเงิน หมายเลขคำสั่งซื้อ)
5. THE Order System SHALL สร้างคำสั่งซื้อใหม่ในฐานข้อมูลด้วยสถานะ "pending"
6. WHEN ผู้ใช้สแกน QR Code และชำระเงินสำเร็จ, THE Order System SHALL อัพเดทสถานะเป็น "paid"
7. THE Order System SHALL ส่งอีเมลยืนยันคำสั่งซื้อไปยังผู้ใช้
8. THE Cart System SHALL ล้างข้อมูลตะกร้าหลังจากสร้างคำสั่งซื้อสำเร็จ

### Requirement 3: ระบบจัดการคำสั่งซื้อ

**User Story:** ในฐานะผู้ใช้ ฉันต้องการดูประวัติคำสั่งซื้อและสถานะการจัดส่ง เพื่อติดตามสินค้าที่ฉันสั่งซื้อ

#### Acceptance Criteria

1. THE Order System SHALL บันทึกข้อมูลคำสั่งซื้อ (รายการสินค้า ข้อมูลผู้สั่ง ที่อยู่จัดส่ง ยอดเงิน วันที่สั่ง)
2. WHEN ผู้ใช้เข้าหน้าตรวจสอบคำสั่งซื้อด้วยหมายเลขคำสั่งซื้อและอีเมล, THE Order System SHALL แสดงรายละเอียดคำสั่งซื้อและสถานะปัจจุบัน
3. THE Order System SHALL แสดงสถานะคำสั่งซื้อเป็นขั้นตอน (รอชำระเงิน ชำระเงินแล้ว ยืนยันคำสั่งซื้อ จัดส่งแล้ว ได้รับสินค้า)
4. THE Order System SHALL สร้างหมายเลขคำสั่งซื้อที่ไม่ซ้ำกันสำหรับทุกคำสั่งซื้อ
5. THE Order System SHALL บันทึก timestamp สำหรับทุกการเปลี่ยนแปลงสถานะ

### Requirement 4: ระบบจัดการคำสั่งซื้อสำหรับ Admin

**User Story:** ในฐานะ Admin ฉันต้องการดูและจัดการคำสั่งซื้อทั้งหมด เพื่อประมวลผลและจัดส่งสินค้าให้ลูกค้า

#### Acceptance Criteria

1. WHEN Admin เข้าสู่ระบบและเปิดหน้าจัดการคำสั่งซื้อ, THE Order System SHALL แสดงรายการคำสั่งซื้อทั้งหมดเรียงตามวันที่ล่าสุด
2. THE Order System SHALL อนุญาตให้ Admin กรองคำสั่งซื้อตามสถานะ (pending, paid, confirmed, shipped, delivered, cancelled)
3. THE Order System SHALL อนุญาตให้ Admin ค้นหาคำสั่งซื้อด้วยหมายเลขคำสั่งซื้อหรืออีเมลลูกค้า
4. WHEN Admin คลิกดูรายละเอียดคำสั่งซื้อ, THE Order System SHALL แสดงข้อมูลครบถ้วน (รายการสินค้า ข้อมูลลูกค้า ที่อยู่จัดส่ง ประวัติสถานะ)
5. THE Order System SHALL อนุญาตให้ Admin เปลี่ยนสถานะคำสั่งซื้อ (ยืนยัน จัดส่ง ยกเลิก)
6. WHEN Admin เปลี่ยนสถานะเป็น "shipped", THE Order System SHALL บันทึกหมายเลขพัสดุ
7. THE Order System SHALL แสดงสถิติคำสั่งซื้อ (จำนวนคำสั่งซื้อวันนี้ ยอดขายรวม คำสั่งซื้อที่รอดำเนินการ)

### Requirement 5: UI/UX ที่สวยงามและใช้งานง่าย

**User Story:** ในฐานะผู้ใช้ ฉันต้องการหน้าเว็บที่สวยงามและใช้งานง่าย เพื่อประสบการณ์การซื้อสินค้าที่ดี

#### Acceptance Criteria

1. THE Cart System SHALL แสดงไอคอนตะกร้าพร้อม badge แสดงจำนวนสินค้าที่มุมบนขวาของทุกหน้า
2. THE Cart System SHALL แสดง animation เมื่อเพิ่มสินค้าลงตะกร้าสำเร็จ
3. THE Cart System SHALL แสดงหน้าตะกร้าว่างพร้อมปุ่ม "เลือกซื้อสินค้า" เมื่อไม่มีสินค้าในตะกร้า
4. THE Order System SHALL แสดงหน้าชำระเงินที่มี QR Code ขนาดใหญ่และชัดเจน
5. THE Order System SHALL แสดงหน้ายืนยันคำสั่งซื้อพร้อมข้อความขอบคุณและหมายเลขคำสั่งซื้อ
6. THE Order System SHALL ใช้สีและ typography ที่สอดคล้องกับ brand identity ของ PINKORY
7. THE Cart System SHALL รองรับการใช้งานบนมือถือ (responsive design)
8. THE Order System SHALL แสดง loading indicator ขณะประมวลผลคำสั่งซื้อ

### Requirement 6: การจัดการสต็อกสินค้า

**User Story:** ในฐานะระบบ ฉันต้องการตรวจสอบสต็อกสินค้าก่อนอนุญาตให้สั่งซื้อ เพื่อป้องกันการสั่งซื้อสินค้าที่หมด

#### Acceptance Criteria

1. WHEN ผู้ใช้พยายามเพิ่มสินค้าที่ inStock เป็น false, THE Cart System SHALL แสดงข้อความ "สินค้าหมด"
2. WHEN ผู้ใช้คลิกชำระเงิน, THE Order System SHALL ตรวจสอบสถานะ inStock ของสินค้าทั้งหมดในตะกร้า
3. IF สินค้าใดหมดสต็อก, THEN THE Order System SHALL แสดงรายการสินค้าที่หมดและไม่อนุญาตให้ดำเนินการต่อ
4. THE Cart System SHALL แสดงป้าย "สินค้าหมด" บนสินค้าที่ inStock เป็น false ในหน้าตะกร้า
