<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö - Admin</title>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/admin.css">
    <link rel="stylesheet" href="../css/admin-users.css">
    <link rel="stylesheet" href="../css/footer.css">
    <link rel="icon" type="image/x-icon" href="../img/logo.png">
</head>

<body>
    <header class="header" id="header">
        <nav class="navbar">
            <div class="nav-left">
                <a href="index.html" class="nav-item">üè† ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
                <a href="search.html" class="search-link">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</a>
            </div>
            <div class="nav-center">
                <a href="index.html">
                    <img src="../img/logo.png" alt="Doll Pre-Order Logo">
                </a>
            </div>
            <div class="nav-right">
                <span class="nav-item">üë§ Admin</span>
                <a onclick="logout()" href="index.html" class="login-btn">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
            </div>
        </nav>
    </header>

    <main class="admin-container">
        <div class="admin-header">
            <h1>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</h1>
        </div>

        <div class="admin-nav">
            <a href="admin-products.html">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
            <a href="admin-users.html" class="active">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</a>
            <a href="admin-orders.html">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</a>
        </div>


        <div class="form-section">
            <h2 id="form-title">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà</h2>
            <form id="user-form">
                <input type="hidden" id="user-id">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="username">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ *</label>
                        <input type="text" id="username" required>
                    </div>
                    <div class="form-group">
                        <label for="password">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô *</label>
                        <input type="password" id="password" required>
                    </div>
                    <div class="form-group">
                        <label for="firstName">‡∏ä‡∏∑‡πà‡∏≠ *</label>
                        <input type="text" id="firstName" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• *</label>
                        <input type="text" id="lastName" required>
                    </div>
                    <div class="form-group">
                        <label for="email">‡∏≠‡∏µ‡πÄ‡∏°‡∏• *</label>
                        <input type="email" id="email" required>
                    </div>
                    <div class="form-group">
                        <label for="age">‡∏≠‡∏≤‡∏¢‡∏∏</label>
                        <input type="number" id="age">
                    </div>
                </div>
                <div class="form-group">
                    <label for="address">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label>
                    <textarea id="address"></textarea>
                </div>
                <div class="form-group">
                    <label for="preferences">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£/‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                    <textarea id="preferences"></textarea>
                </div>
                <div class="btn-group">
                    <button type="submit" class="btn btn-primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                    <button type="button" id="cancel-btn" class="btn btn-secondary">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                </div>
            </form>
        </div>
 <!-- Search Section -->
<div class="search-section">
    <h2>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</h2>
    <div class="search-form">
        <div class="search-group">
            <label for="search-firstName">‡∏ä‡∏∑‡πà‡∏≠</label>
            <input type="text" id="search-firstName" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...">
        </div>
        <div class="search-buttons">
            <button class="btn btn-primary" onclick="searchAdmins()">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
            <button class="btn btn-secondary" onclick="resetSearch()">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
        </div>
    </div>
</div>

        <div class="table-section">
            <h2>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</h2>
            <table>
                <thead>
                    <tr>
                        <th>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</th>
                        <th>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                        <th>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</th>
                        <th>‡∏≠‡∏≤‡∏¢‡∏∏</th>
                        <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                    </tr>
                </thead>
                <tbody id="users-table"></tbody>
            </table>
        </div>
    </main>

    <footer>
        <p>&copy; 2024 Doll Pre-Order. All rights reserved.</p>
        <p>Made with ‚ù§Ô∏è by Our Team</p>
    </footer>

    <!-- Edit Modal -->
    <div id="edit-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</h2>
                <button class="modal-close" onclick="closeEditModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="edit-form">
                    <input type="hidden" id="edit-user-id">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="edit-username">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ *</label>
                            <input type="text" id="edit-username" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-password">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (‡πÄ‡∏ß‡πâ‡∏ô‡∏ß‡πà‡∏≤‡∏á‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô)</label>
                            <input type="password" id="edit-password">
                        </div>
                        <div class="form-group">
                            <label for="edit-firstName">‡∏ä‡∏∑‡πà‡∏≠ *</label>
                            <input type="text" id="edit-firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-lastName">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• *</label>
                            <input type="text" id="edit-lastName" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-email">‡∏≠‡∏µ‡πÄ‡∏°‡∏• *</label>
                            <input type="email" id="edit-email" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-age">‡∏≠‡∏≤‡∏¢‡∏∏</label>
                            <input type="number" id="edit-age">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="edit-address">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label>
                        <textarea id="edit-address"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="edit-preferences">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£/‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                        <textarea id="edit-preferences"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeEditModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button type="button" class="btn btn-primary" onclick="saveEdit()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Dialog -->
    <div id="confirm-dialog" class="modal-overlay" style="display: none;">
        <div class="confirm-dialog">
            <div class="confirm-dialog-icon">‚ö†Ô∏è</div>
            <div class="confirm-dialog-title">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö</div>
            <div class="confirm-dialog-message">‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ
            </div>
            <div class="confirm-dialog-buttons">
                <button class="btn btn-secondary" onclick="closeConfirmDialog()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button class="btn btn-danger" onclick="confirmDelete()">‡∏•‡∏ö</button>
            </div>
        </div>
    </div>

</body>

</html>
<script>
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö login
const token = localStorage.getItem('token');
if (!token) {
  alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤ Login ‡∏Å‡πà‡∏≠‡∏ô');
  window.location.href = 'login.html';
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏∂‡∏á‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
async function loadAdmins() {
  try {
    const response = await fetch('http://localhost:3000/api/admins', {
      headers: {
        'Authorization': `Bearer ${token}`
      }
    });
    
    const data = await response.json();
    
    if (data.success) {
      displayAdmins(data.data);
    } else {
      alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡πÑ‡∏î‡πâ');
    }
  } catch (error) {
    console.error('Error:', error);
    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
  }
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•
async function searchAdmins() {
  const username = document.getElementById('search-username')?.value || '';
  const email = document.getElementById('search-email')?.value || '';
  const firstName = document.getElementById('search-firstName')?.value || '';
  
  const params = new URLSearchParams();
  if (username) params.append('username', username);
  if (email) params.append('email', email);
  if (firstName) params.append('firstName', firstName);
  
  try {
    const response = await fetch(`http://localhost:3000/api/admins?${params}`, {
      headers: {
        'Authorization': `Bearer ${token}`
      }
    });
    
    const data = await response.json();
    
    if (data.success) {
      displayAdmins(data.data);
    }
  } catch (error) {
    console.error('Error:', error);
    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤');
  }
}

// ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
function displayAdmins(admins) {
  const tbody = document.getElementById('users-table');
  
  if (admins.length === 0) {
    tbody.innerHTML = '<tr><td colspan="5">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</td></tr>';
    return;
  }
  
  tbody.innerHTML = admins.map(a => `
    <tr>
      <td>${a.username}</td>
      <td>${a.firstName} ${a.lastName}</td>
      <td>${a.email}</td>
      <td>${a.role}</td>
      <td>
        <button class="btn btn-primary" onclick="viewAdmin('${a._id}')">‡∏î‡∏π</button>
        <button class="btn btn-secondary" onclick="editAdmin('${a._id}')">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
        <button class="btn btn-danger" onclick="deleteAdmin('${a._id}')">‡∏•‡∏ö</button>
      </td>
    </tr>
  `).join('');
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•
async function viewAdmin(id) {
  try {
    const response = await fetch(`http://localhost:3000/api/admins/${id}`, {
      headers: {
        'Authorization': `Bearer ${token}`
      }
    });
    
    const data = await response.json();
    
    if (data.success) {
      const a = data.data;
      alert(`Username: ${a.username}\n‡∏ä‡∏∑‡πà‡∏≠: ${a.firstName} ${a.lastName}\nEmail: ${a.email}\nRole: ${a.role}`);
    }
  } catch (error) {
    console.error('Error:', error);
  }
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Logout
function logout() {
  localStorage.removeItem('token');
  localStorage.removeItem('user');
  window.location.href = 'login.html';
}
// Event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö form ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•
document.getElementById('user-form').addEventListener('submit', async (e) => {
  e.preventDefault();
  
  const adminData = {
    username: document.getElementById('username').value,
    password: document.getElementById('password').value,
    firstName: document.getElementById('firstName').value,
    lastName: document.getElementById('lastName').value,
    email: document.getElementById('email').value,
    role: 'admin'
  };
  
  try {
    const response = await fetch('http://localhost:3000/api/admins', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(adminData)
    });
    
    const data = await response.json();
    
    if (data.success) {
      alert('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
      document.getElementById('user-form').reset();
      loadAdmins();
    } else {
      alert(data.message || '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
    }
  } catch (error) {
    console.error('Error:', error);
    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
  }
});
// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î Modal ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•
async function editAdmin(id) {
  try {
    const response = await fetch(`http://localhost:3000/api/admins/${id}`, {
      headers: {
        'Authorization': `Bearer ${token}`
      }
    });
    
    const data = await response.json();
    
    if (data.success) {
      const a = data.data;
      
      // ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
      document.getElementById('edit-user-id').value = a._id;
      document.getElementById('edit-username').value = a.username;
      document.getElementById('edit-firstName').value = a.firstName;
      document.getElementById('edit-lastName').value = a.lastName;
      document.getElementById('edit-email').value = a.email;
      document.getElementById('edit-password').value = ''; // ‡πÄ‡∏ß‡πâ‡∏ô‡∏ß‡πà‡∏≤‡∏á
      
      // ‡πÄ‡∏õ‡∏¥‡∏î Modal
      document.getElementById('edit-modal').style.display = 'flex';
    }
  } catch (error) {
    console.error('Error:', error);
    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
  }
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏¥‡∏î Modal
function closeEditModal() {
  document.getElementById('edit-modal').style.display = 'none';
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
async function saveEdit() {
  const id = document.getElementById('edit-user-id').value;
  
  const adminData = {
    username: document.getElementById('edit-username').value,
    firstName: document.getElementById('edit-firstName').value,
    lastName: document.getElementById('edit-lastName').value,
    email: document.getElementById('edit-email').value
  };
  
  // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ password ‡πÉ‡∏´‡∏°‡πà ‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢
  const newPassword = document.getElementById('edit-password').value;
  if (newPassword) {
    adminData.password = newPassword;
  }
  
  try {
    const response = await fetch(`http://localhost:3000/api/admins/${id}`, {
      method: 'PUT',
      headers: {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(adminData)
    });
    
    const data = await response.json();
    
    if (data.success) {
      alert('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
      closeEditModal();
      loadAdmins();
    } else {
      alert(data.message || '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
    }
  } catch (error) {
    console.error('Error:', error);
    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
  }
}
// ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö ID ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö
let deleteAdminId = null;

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î Confirmation Dialog
function deleteAdmin(id) {
  deleteAdminId = id;
  document.getElementById('confirm-dialog').style.display = 'flex';
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏¥‡∏î Confirmation Dialog
function closeConfirmDialog() {
  deleteAdminId = null;
  document.getElementById('confirm-dialog').style.display = 'none';
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö
async function confirmDelete() {
  if (!deleteAdminId) return;
  
  try {
    const response = await fetch(`http://localhost:3000/api/admins/${deleteAdminId}`, {
      method: 'DELETE',
      headers: {
        'Authorization': `Bearer ${token}`
      }
    });
    
    const data = await response.json();
    
    if (data.success) {
      alert('‡∏•‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
      closeConfirmDialog();
      loadAdmins();
    } else {
      alert(data.message || '‡∏•‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
    }
  } catch (error) {
    console.error('Error:', error);
    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
  }
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
function resetSearch() {
  document.getElementById('search-firstName').value = '';
  loadAdmins();
}

// ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ï‡∏≠‡∏ô load ‡∏´‡∏ô‡πâ‡∏≤
loadAdmins();
</script>

</body>

</html>